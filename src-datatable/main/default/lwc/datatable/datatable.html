<template>
  <div lwc:if={_showSpinner} style="height: 100%" class="slds-is-relative">
    <lightning-spinner variant="brand" size="medium"></lightning-spinner>
  </div>
  <template lwc:else>
    <div lwc:if={_state.records.length} style="height: 100%">
      <c-sobject-datatable
        records={_state.records}
        config={_state.columns}
        default-sort-direction={defaultSortDirection}
        draft-values={_draftValues}
        enable-infinite-loading={_state.enableInfiniteLoading}
        hide-checkbox-column={_state.hideCheckBoxColumn}
        is-loading={_state.isLoading}
        key-field="Id"
        load-more-offset={_state.loadMoreOffset}
        max-column-width={_state.maxColumnWidth}
        min-column-width={_state.minColumnWidth}
        onloadmore={_handleLoadMoreData}
        onrowaction={_handleRowAction}
        onrowinforequest={_handleRowInfoRequest}
        onsave={_handleSave}
        onsort={_handleSort}
        show-row-number-column
        sorted-by={_state.sortedBy}
        sorted-direction={_state.sortDirection}
      ></c-sobject-datatable>
      <!-- data-id="theDataTable"
                    oncellchange={handleCellChange}
                    draft-values={_draftValues}
                    errors={_errors}
                    onrowselection={handleRowSelection}
                    onpicklistchanged={picklistChanged}
                    oncustomfieldedit={handleCustomFieldEdit}
                    suppress-bottom-bar -->
      {_loadMoreStatus}
    </div>
    <template lwc:else>
      <c-datatable-no-records-illustration>
        <!-- No results for "{_searchKey}" in {objectLabel} -->
      </c-datatable-no-records-illustration>
    </template>
  </template>
</template>
