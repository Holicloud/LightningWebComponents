<template>
  <div lwc:if={_showSpinner} style="height: 100%" class="slds-is-relative">
    <lightning-spinner variant="brand" size="medium"></lightning-spinner>
  </div>
  <template lwc:else>
    <div lwc:if={_state.records.length} style="height: 100%">
      <c-data-table-extended-types
        columns={_state.columns}
        data={_state.records}
        default-sort-direction={defaultSortDirection}
        draft-values={_draftValues}
        enable-infinite-loading={_state.enableInfiniteLoading}
        hide-checkbox-column={_state.hideCheckBoxColumn}
        is-loading={_state.isLoading}
        key-field="Id"
        load-more-offset={_state.loadMoreOffset}
        max-column-width={_state.maxColumnWidth}
        min-column-width={_state.minColumnWidth}
        oncellchange={_handleChange}
        onloadmore={_handleLoadMoreData}
        onrowaction={_handleRowAction}
        onrowinforequest={_handleRowInfoRequest}
        onsave={_handleSave}
        onsort={_handleSort}
        show-row-number-column
        sorted-by={_state.sortedBy}
        sorted-direction={_state.sortDirection}
      ></c-data-table-extended-types>
      <!-- data-id="theDataTable"
                    oncellchange={handleCellChange}
                    draft-values={_draftValues}
                    errors={_errors}
                    onrowselection={handleRowSelection}
                    onpicklistchanged={picklistChanged}
                    oncustomfieldedit={handleCustomFieldEdit}
                    suppress-bottom-bar -->
      {_loadMoreStatus}
    </div>
    <template lwc:else>
      <c-datatable-no-records-illustration>
        <!-- No results for "{_searchKey}" in {objectLabel} -->
      </c-datatable-no-records-illustration>
    </template>
  </template>

  <!-- <div if:true={showSpinner} class="slds-spinner_inline spinner-padding">
        <lightning-spinner variant="brand" alternative-text="Loading" size="medium">
        </lightning-spinner>
    </div>
    <lightning-layout>
        <lightning-layout-item padding="horizontal-medium" size="12">
            <lightning-layout>
                <lightning-layout-item padding="horizontal-medium" size="3">
                    {loadMoreStatus}
                </lightning-layout-item>
                <lightning-layout-item padding="horizontal-medium" size="6">
                    <div if:true={cellDataChanged} class="slds-align_absolute-center">
                        <lightning-layout-item padding="horizontal-medium">
                            <lightning-button variant="bare" label="Cancel" title="Cancel" onclick={handleCancel}></lightning-button>
                        </lightning-layout-item>
                        <lightning-layout-item padding="horizontal-medium">
                            <lightning-button variant="brand" label="Save" title="Save" onclick={handleSave}></lightning-button>
                        </lightning-layout-item>
                    </div>
                </lightning-layout-item>
                <lightning-layout-item padding="horizontal-medium" size="3">
                    <div class="slds-form-element">
                        <div if:true={displayButton}>
                            <a onclick={displayLimitOfRecords}>display More...</a>
                        </div>
                        <template if:true={optionsAreOK}>
                            <div class="slds-popover slds-nubbin_bottom-left slds-rise-from-ground" role="tooltip" id="help"
                                style="position:absolute;top:-45px;left:-15px;width:170px">
                                <div class="slds-popover__body">
                                    <div  class="slds-modal__content">
                                        <lightning-combobox
                                            label='amount displayed'
                                            class='slds-modal__content'
                                            name="progress"
                                            options={options}
                                            value={_limitOfRecords}
                                            onchange={handleChangeLimitDisplayed}
                                        ></lightning-combobox>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                </lightning-layout-item>
            </lightning-layout>
        </lightning-layout-item> -->
  <!-- </lightning-layout> -->
  <!-- <c-edit-data-table-custom-field
        onfieldchanged={handleFieldChanged}
        data-id="editCustomPopUpComponent"
    ></c-edit-data-table-custom-field> -->
</template>
