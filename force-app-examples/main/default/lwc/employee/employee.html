<template>
  <c-panel
    data-id="panel"
    title={LABELS.title}
    icon="utility:user"
    lwc:ref="panel"
    classes="slds-card_boundary"
  >
    <div slot="actions">
      <lightning-button-group>
        <lightning-button
          data-id="add-dependent"
          variant="brand"
          label={LABELS.buttons.addDependent}
          onclick={handleAddDependent}
        ></lightning-button>
        <lightning-button
          data-id="remove"
          onclick={handleRemove}
          variant="destructive"
          label={LABELS.buttons.remove}
          title={LABELS.buttons.remove}
          icon-name="utility:delete"
        ></lightning-button>
      </lightning-button-group>
    </div>
    <lightning-layout multiple-rows>
      <lightning-layout-item padding="around-small" size="3">
        <lightning-input
          data-input="firstName"
          label={LABELS.inputs.firstName}
          onchange={handleChange}
          value={record.firstName}
          max-length="40"
        ></lightning-input>
        <lightning-combobox
          data-input="gender"
          label={LABELS.inputs.gender}
          onchange={handleChange}
          options={genders}
          required
          value={record.gender}
        ></lightning-combobox>
      </lightning-layout-item>
      <lightning-layout-item padding="around-small" size="3">
        <lightning-input
          data-input="middleInitial"
          label={LABELS.inputs.middleInitial}
          onchange={handleChange}
          max-length="1"
          value={record.middleInitial}
        ></lightning-input>
        <lightning-input
          data-input="relationship"
          label={LABELS.inputs.relationship}
          value={record.relationship}
          disabled
        ></lightning-input>
      </lightning-layout-item>
      <lightning-layout-item padding="around-small" size="3">
        <lightning-input
          data-input="lastName"
          label={LABELS.inputs.lastName}
          onchange={handleChange}
          value={record.lastName}
          max-length="40"
        ></lightning-input>
        <lightning-input
          data-input="zipCode"
          label={LABELS.inputs.zipCode}
          onchange={handleChange}
          pattern="^\d{5}$"
          message-when-pattern-mismatch={LABELS.errors.zipCodePatternMissMatch}
          value={record.zipCode}
        ></lightning-input>
      </lightning-layout-item>
      <lightning-layout-item padding="around-small" size="3">
        <lightning-input
          data-input="dateOfBirth"
          date-style="short"
          label={LABELS.inputs.dateOfBirth}
          onchange={handleChange}
          message-when-range-overflow={LABELS.errors.dateOfBirthGreaterThanToday}
          max={todaysDate}
          required
          type="date"
          value={record.dateOfBirth}
        ></lightning-input>
        <lightning-combobox
          data-input="status"
          label={LABELS.inputs.status}
          onchange={handleChange}
          options={statusOptions}
          value={record.status}
          disabled
        ></lightning-combobox>
      </lightning-layout-item>
      <lightning-layout-item
        if:true={record.dependents.length}
        padding="around-small"
        size="12"
      >
        <c-expandable-section
          title={LABELS.titleDependents}
          data-id="dependents"
        >
          <template for:each={record.dependents} for:item="dependent">
            <c-employee-dependent
              key={dependent.index}
              data-input={dependent.index}
              data-dependent-id={dependent.index}
              record={dependent}
              onupdate={handleDependentChange}
              onremove={handleRemovedDependent}
            ></c-employee-dependent>
          </template>
        </c-expandable-section>
      </lightning-layout-item>
    </lightning-layout>
  </c-panel>
</template>
