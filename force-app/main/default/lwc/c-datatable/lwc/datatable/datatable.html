<template>
    <div lwc:if={showSpinner} style="height:100%;" class="slds-is-relative">
        <lightning-spinner variant="brand" size="medium"></lightning-spinner>
    </div>
    <template lwc:else>
        <div lwc:if={state.records.length} style='height:100%'>
            <c-data-table-extended-types
                columns={state.columns}
                data={state.records}
                default-sort-direction={defaultSortDirection}
                enable-infinite-loading={state.enableInfiniteLoading}
                hide-checkbox-column={state.hideCheckBoxColumn}
                key-field="Id"
                load-more-offset={state.loadMoreOffset}
                max-column-width={state.maxColumnWidth}
                min-column-width={state.minColumnWidth}
                onloadmore={loadMoreData}
                onrowaction={handleRowAction}
                onsort={handleOnSort}
                show-row-number-column
                sorted-by={state.sortedBy}
                sorted-direction={state.sortDirection}
                onsave={handleSave}
                is-loading={isLoading}
            ></c-data-table-extended-types>
                    <!-- data-id="theDataTable"
                    oncellchange={handleCellChange}
                    draft-values={_draftValues}
                    errors={_errors}
                    onrowselection={handleRowSelection}
                    onpicklistchanged={picklistChanged}
                    oncustomfieldedit={handleCustomFieldEdit}
                    suppress-bottom-bar -->
            {loadMoreStatus}
        </div>
        <template lwc:else>
            <c-datatable-no-records-illustration>
                No results for "{_searchKey}" in {objectLabel}
            </c-datatable-no-records-illustration>
        </template>    
    </template>
    
    <!-- <div if:true={showSpinner} class="slds-spinner_inline spinner-padding">
        <lightning-spinner variant="brand" alternative-text="Loading" size="medium">
        </lightning-spinner>
    </div>
    <lightning-layout>
        <lightning-layout-item padding="horizontal-medium" size="12">
            <lightning-layout>
                <lightning-layout-item padding="horizontal-medium" size="3">
                    {loadMoreStatus}
                </lightning-layout-item>
                <lightning-layout-item padding="horizontal-medium" size="6">
                    <div if:true={cellDataChanged} class="slds-align_absolute-center">
                        <lightning-layout-item padding="horizontal-medium">
                            <lightning-button variant="bare" label="Cancel" title="Cancel" onclick={handleCancel}></lightning-button>
                        </lightning-layout-item>
                        <lightning-layout-item padding="horizontal-medium">
                            <lightning-button variant="brand" label="Save" title="Save" onclick={handleSave}></lightning-button>
                        </lightning-layout-item>
                    </div>
                </lightning-layout-item>
                <lightning-layout-item padding="horizontal-medium" size="3">
                    <div class="slds-form-element">
                        <div if:true={displayButton}>
                            <a onclick={displayLimitOfRecords}>display More...</a>
                        </div>
                        <template if:true={optionsAreOK}>
                            <div class="slds-popover slds-nubbin_bottom-left slds-rise-from-ground" role="tooltip" id="help"
                                style="position:absolute;top:-45px;left:-15px;width:170px">
                                <div class="slds-popover__body">
                                    <div  class="slds-modal__content">
                                        <lightning-combobox
                                            label='amount displayed'
                                            class='slds-modal__content'
                                            name="progress"
                                            options={options}
                                            value={_limitOfRecords}
                                            onchange={handleChangeLimitDisplayed}
                                        ></lightning-combobox>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                </lightning-layout-item>
            </lightning-layout>
        </lightning-layout-item> -->
    <!-- </lightning-layout> -->
    <!-- <c-edit-data-table-custom-field
        onfieldchanged={handleFieldChanged}
        data-id="editCustomPopUpComponent"
    ></c-edit-data-table-custom-field> -->
</template>